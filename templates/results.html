<div class="results">
  <!-- <query state-ref="stateRef"></query> -->
  <query></query>
  <div class="mapbox row">
    <div class="col s12">
      <h3 class="center-align">{{geoData.address}} is <span class="rating">{{rating.textRating}}</span> hike-able</h3>
      <div class="center-align">
        <img style="height:50px; width:50px" src="img/icons/hiking.svg"
          ng-repeat="i in createRatingRepeat(rating.numberRating) track by $index"
          ng-show="rating.numberRating"
          class="ng-hide"/>
      </div>
      <mapbox places="places" geo-data="geoData" geo-json="geoJson"></mapbox>
    </div>
  </div>
  <div class="activities">
    <h3 class="center-align">Nearby Adventures</h3>
    <div class="row">
        <div class="col s12">
            <ul tabs reload="allTabContentLoaded">
                <li ng-click="filterActivity('hiking')" class="tab col s3"><a href="#">Hiking</a></li>
                <li ng-click="filterActivity('mountain biking')" class="tab col s3"><a class="active" href="#">Mountain Biking</a></li>
                <li ng-click="filterActivity('camping')" class="tab col s3"><a href="#">Camping</a></li>
                <li ng-click="filterActivity('snow sports')" class="tab col s3"><a href="#">Snow Sports</a></li>
                <li class="tab col s3"><a href="#">Search</a></li>
            </ul>
        </div>
    </div>
    {{(place.activities | filter: { activity_type_name: activityFilter }).length}}
    <div ng-show="results.length === 0" class="ng-hide">
      Sorry, there are no {{activityFilter}} spots in {{zip}}.
    </div>
    <div class="row">
      <div ng-repeat="place in places" ng-show="place.display" class="ng-hide">
        <div ng-repeat="activity in filteredActivities = (place.activities | filter: searchInput | filter: { activity_type_name: activityFilter })">
          <div class="col s12 m6 l4">
            <div class="card">
              <div class="card-image">
                <img ng-src="{{activity.thumbnail}}" alt="{{activity.name}}"/>
                <span class="card-title background"><h5>{{activity.name}} {{activity.activity_type_name}}</h5></span>
              </div>
              <div class="card-content flow-text">
                <p>{{place.city}}, {{place.state}}</p>
                <p>{{place.humanReadableDistance}}</p>
                <p>{{activity.length}}</p>
                <p class="activator teal-text">More Info</p>
              </div>
              <div class="card-reveal">
                <span class="card-title hike-score-green-text text-lighten-1">
                  {{activity.name}} {{activity.activity_type_name}}
                  <i class="material-icons right">close</i>
                </span>
                <p ng-bind-html="activity.description | to_trusted"></p>
                <a href={{activity.url}} target="_blank" class="teal-text">Let's go!</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    {{filteredActivities.length}}
    <div ng-show="results.length === 0" class="ng-hide">
      Sorry, there are no {{activityFilter}} spots in {{zip}}.
    </div>
  </div>
</div>
